# 对于框架的理解
thinkphp5.1和6.0的核心都是容器实现。框架即是一个容器，其他的实现都是组件或扩展。

我们先看一下tp5.1入口文件中的代码：
```
Container::get('app')->run()->send();
```
1、`Container::get('app')`

获取`Container::class`绑定标识`app`的类，即`App::class`,这个没有啥难度，稍微看几行代码就可以理解。

2、`Container::get('app')->run()`等同于`(new App())->run()`

我们绝大部分的业务逻辑都是通过`run()`来完成调度，中间是如何完成调度的我们暂时不做分析，我们只要记住，这个方法返回的是一个`Response`对象。

3、`Container::get('app')->run()->send()`等同于`app('response')->send()`

在`think\Response`中的`send()`还会对容器管理类`$this->app`中的属性和数据进行一些处理，再发送到客户端。

这是一次完整的http请求流程。接收请求->实例化容器->逻辑调度->响应。所以，在这个流程中，有一些组件其实是非必要的，但是为了方便我们的业务开发，又是必需的。不过有一点可以放心的是，5.1实现了惰性加载，这些组件你不用并不是产生性能开销，增加的仅仅是几字节的文件大小。

# 对于容器的理解
初次接触到容器的同学可以比较难以理解容器的作用，这里以一个生活场景作为距离便于理解。

我们把一次请求比喻成你去一个大型超市购物，容器为超市的手推车。

1、你在进入超市前，需要去找一个空的手推车。（入口位置实例化容器）

2、手推车上会有一些超市名称等标识。（框架默认加载的配置项）

3、超市有很多货架，按照商品分类好。（这是模型，并不需要你去仓库（数据库）拿商品）

4、你走到饮料区，拿了一瓶矿泉水放到手推车。（绑定一个对象到容器PS：你也可以直接拿起来喝了再放进手推车，这叫使用即绑定）

5、你到了食品区，拿了一袋薯片，发现自己渴了，你拿起水，喝了一口。（你不需要再次去饮料区拿水，容器内绑定了可以直接使用，但使用后对象的属性会改变）

6、你去收银台结账，收银员只会计算手推车内的商品。（这是响应，最后你得到了一瓶打开的水和一袋薯片）

PS：至于你口袋里有没有东西，能不能带出来，那要看超市（系统）的安保措施了。